(this["webpackJsonpmyLibrary"]=this["webpackJsonpmyLibrary"]||[]).push([["chunk-205ac0cc"],{"05ef":function(e,t,a){"use strict";a("a99e")},"8b2c":function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return o})),a.d(t,"g",(function(){return i})),a.d(t,"b",(function(){return r})),a.d(t,"d",(function(){return u}));var s=a("b775");function n(e){return Object(s["a"])({url:"/system/student/list",method:"get",params:e})}function l(e){return Object(s["a"])({url:"/system/student/"+e,method:"get"})}function o(e){return Object(s["a"])({url:"/system/student",method:"post",data:e})}function i(e){return Object(s["a"])({url:"/system/student",method:"put",data:e})}function r(e){return Object(s["a"])({url:"/system/student/"+e,method:"delete"})}function u(e){return Object(s["a"])({url:"/system/student/importData",method:"post",headers:{"Content-Type":"multipart/form-data"},data:e})}},a99e:function(e,t,a){},ec1f:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"filter-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"学生工号",prop:"studentNo"}},[a("el-input",{attrs:{placeholder:"请输入学生工号",clearable:"","prefix-icon":"el-icon-user"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.studentNo,callback:function(t){e.$set(e.queryParams,"studentNo",t)},expression:"queryParams.studentNo"}})],1),a("el-form-item",{attrs:{label:"学生姓名",prop:"studentName"}},[a("el-input",{attrs:{placeholder:"请输入学生姓名",clearable:"","prefix-icon":"el-icon-s-custom"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.studentName,callback:function(t){e.$set(e.queryParams,"studentName",t)},expression:"queryParams.studentName"}})],1),a("el-form-item",{attrs:{label:"班级",prop:"className"}},[a("el-input",{attrs:{placeholder:"请输入班级",clearable:"","prefix-icon":"el-icon-school"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.className,callback:function(t){e.$set(e.queryParams,"className",t)},expression:"queryParams.className"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1)],1),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:student:add"],expression:"['system:student:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:student:edit"],expression:"['system:student:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),a("el-col",{attrs:{span:1.5}},[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:student:remove"],expression:"['system:student:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),a("el-col",{attrs:{span:1.5}},[a("el-dropdown",{attrs:{"split-button":"",type:"info",size:"mini"},on:{command:e.handleCommand}},[a("span",[e._v("数据操作")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"import",icon:"el-icon-upload2"}},[e._v("导入数据")]),a("el-dropdown-item",{attrs:{command:"export",icon:"el-icon-download"}},[e._v("导出数据")]),a("el-dropdown-item",{attrs:{command:"template",icon:"el-icon-document"}},[e._v("下载模板")])],1)],1)],1),a("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.studentList,border:"",stripe:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"学生ID",align:"center",prop:"studentId",width:"80"}}),a("el-table-column",{attrs:{label:"学生工号",align:"center",prop:"studentNo",width:"120"}}),a("el-table-column",{attrs:{label:"学生姓名",align:"center",prop:"studentName","min-width":"100","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"性别",align:"center",prop:"studentSex",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"男"===t.row.studentSex?"primary":"success"}},[e._v(e._s(t.row.studentSex))])]}}])}),a("el-table-column",{attrs:{label:"班级id",align:"center",prop:"clasId",width:"60"}}),a("el-table-column",{attrs:{label:"班级",align:"center",prop:"className","min-width":"120","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"密码",align:"center",prop:"studentPassword","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"info"}},[e._v("******")])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:student:edit"],expression:"['system:student:edit']"}],attrs:{size:"mini",type:"primary",icon:"el-icon-edit",circle:"",title:"修改"},on:{click:function(a){return e.handleUpdate(t.row)}}}),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:student:remove"],expression:"['system:student:remove']"}],attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:"",title:"删除"},on:{click:function(a){return e.handleDelete(t.row)}}}),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:student:edit"],expression:"['system:student:edit']"}],attrs:{size:"mini",type:"warning",icon:"el-icon-key",circle:"",title:"重置密码"},on:{click:function(a){return e.handleResetPassword(t.row)}}})]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"600px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"学生工号",prop:"studentNo"}},[a("el-input",{attrs:{placeholder:"请输入学生工号","prefix-icon":"el-icon-user"},model:{value:e.form.studentNo,callback:function(t){e.$set(e.form,"studentNo",t)},expression:"form.studentNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"学生姓名",prop:"studentName"}},[a("el-input",{attrs:{placeholder:"请输入学生姓名","prefix-icon":"el-icon-s-custom"},model:{value:e.form.studentName,callback:function(t){e.$set(e.form,"studentName",t)},expression:"form.studentName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"密码",prop:"studentPassword"}},[a("el-input",{attrs:{placeholder:"请输入密码","prefix-icon":"el-icon-lock","show-password":""},model:{value:e.form.studentPassword,callback:function(t){e.$set(e.form,"studentPassword",t)},expression:"form.studentPassword"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"性别",prop:"studentSex"}},[a("el-radio-group",{model:{value:e.form.studentSex,callback:function(t){e.$set(e.form,"studentSex",t)},expression:"form.studentSex"}},[a("el-radio",{attrs:{label:"男"}},[e._v("男")]),a("el-radio",{attrs:{label:"女"}},[e._v("女")])],1)],1)],1)],1),a("el-form-item",{attrs:{label:"班级",prop:"className"}},[a("el-input",{attrs:{placeholder:"请输入班级","prefix-icon":"el-icon-school"},model:{value:e.form.className,callback:function(t){e.$set(e.form,"className",t)},expression:"form.className"}})],1),e.form.studentId?a("el-form-item",{attrs:{label:"状态",prop:"delFlag"}},[a("el-radio-group",{model:{value:e.form.delFlag,callback:function(t){e.$set(e.form,"delFlag",t)},expression:"form.delFlag"}},[a("el-radio",{attrs:{label:"0"}},[e._v("正常")]),a("el-radio",{attrs:{label:"1"}},[e._v("停用")])],1)],1):e._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:e.upload.title,visible:e.upload.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.upload,"open",t)}}},[a("el-steps",{staticStyle:{"margin-bottom":"20px"},attrs:{active:e.upload.step,"finish-status":"success",simple:""}},[a("el-step",{attrs:{title:"选择文件"}}),a("el-step",{attrs:{title:"上传数据"}}),a("el-step",{attrs:{title:"导入完成"}})],1),0===e.upload.step?a("div",[a("el-upload",{ref:"upload",attrs:{limit:1,accept:".xlsx, .xls",action:"#",disabled:e.upload.isUploading,"http-request":e.handleFileUpload,"auto-upload":!1,drag:"","on-change":e.handleFileChange,"on-remove":e.handleFileRemove}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将Excel文件拖到此处，或"),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip text-center",attrs:{slot:"tip"},slot:"tip"},[a("span",[e._v("仅允许导入xls、xlsx格式文件，文件大小不能超过5MB")]),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-link",{staticStyle:{"font-size":"12px","vertical-align":"baseline"},attrs:{type:"primary",underline:!1},on:{click:e.importTemplate}},[e._v("下载导入模板")])],1)])])],1):e._e(),1===e.upload.step?a("div",{staticStyle:{"text-align":"center",padding:"20px 0"}},[a("el-progress",{attrs:{percentage:e.upload.percentage,status:100===e.upload.percentage?"success":"","stroke-width":18}}),a("div",{staticStyle:{"margin-top":"15px",color:"#606266"}},[e.upload.percentage<100?a("i",{staticClass:"el-icon-loading"}):a("i",{staticClass:"el-icon-circle-check",staticStyle:{color:"#67C23A"}}),a("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(e.upload.statusText))])])],1):e._e(),2===e.upload.step?a("div",{staticStyle:{"text-align":"center",padding:"20px 0"}},[a("i",{staticClass:"el-icon-circle-check",staticStyle:{"font-size":"50px",color:"#67C23A"}}),a("h3",{staticStyle:{margin:"15px 0"}},[e._v("导入成功")]),a("p",[e._v("成功导入 "+e._s(e.upload.successCount)+" 条数据")])]):e._e(),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[2===e.upload.step?a("el-button",{on:{click:function(t){e.upload.open=!1}}},[e._v("关 闭")]):e._e(),2===e.upload.step?a("el-button",{on:{click:function(t){e.upload.step=0}}},[e._v("继续导入")]):e._e(),0===e.upload.step?a("el-button",{attrs:{type:"primary",disabled:!e.upload.fileSelected},on:{click:e.submitFileForm}},[e._v("开始导入")]):e._e(),0===e.upload.step?a("el-button",{on:{click:function(t){e.upload.open=!1}}},[e._v("取 消")]):e._e()],1)],1)],1)},n=[],l=a("5530"),o=(a("d81d"),a("d3b7"),a("0643"),a("a573"),a("8b2c")),i=a("5f87"),r={name:"Student",data:function(){return{loading:!0,submitLoading:!1,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,studentList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:10,studentNo:null,studentName:null,studentPassword:null,studentSex:null,className:null},form:{},rules:{studentNo:[{required:!0,message:"学生工号不能为空",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],studentName:[{required:!0,message:"学生姓名不能为空",trigger:"blur"}],studentPassword:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}],studentSex:[{required:!0,message:"请选择性别",trigger:"change"}],className:[{required:!0,message:"班级不能为空",trigger:"blur"}]},upload:{open:!1,title:"导入学生数据",isUploading:!1,headers:{Authorization:"Bearer "+Object(i["a"])()},step:0,percentage:0,statusText:"正在上传...",fileSelected:!1,successCount:0}}},created:function(){this.getList()},methods:{handleFileChange:function(e){this.upload.fileSelected=!0},handleFileRemove:function(){this.upload.fileSelected=!1},handleCommand:function(e){"import"===e?this.handleImport():"export"===e?this.handleExport():"template"===e&&this.importTemplate()},handleImport:function(){this.upload.open=!0,this.upload.step=0,this.upload.percentage=0,this.upload.fileSelected=!1},importTemplate:function(){this.download("system/student/importTemplate",{},"student_template_".concat((new Date).getTime(),".xlsx"))},handleFileUpload:function(e){var t=this,a=new FormData;a.append("file",e.file),this.upload.isUploading=!0,this.upload.step=1,this.upload.percentage=0,this.upload.statusText="正在上传...",this.upload.percentage=30,setTimeout((function(){t.upload.percentage=60}),500),setTimeout((function(){t.upload.percentage=80}),1e3),setTimeout((function(){t.upload.statusText="正在处理数据..."}),1500),Object(o["d"])(a).then((function(e){t.upload.percentage=100,t.upload.statusText="导入完成",setTimeout((function(){t.upload.isUploading=!1,t.upload.step=2,t.upload.successCount=e.data||0,t.$refs.upload.clearFiles(),t.getList()}),500)})).catch((function(e){t.upload.isUploading=!1,t.upload.step=0,t.$modal.msgError("导入失败："+(e.message||"未知错误")),console.error(e)}))},submitFileForm:function(){if(this.$refs.upload.uploadFiles&&0!==this.$refs.upload.uploadFiles.length){var e=this.$refs.upload.uploadFiles[0];this.handleFileUpload({file:e.raw||e})}else this.$modal.msgError("请先选择要导入的文件")},handleResetPassword:function(e){var t=this;this.$modal.confirm("确定要重置该学生的密码吗？").then((function(){Object(o["resetStudentPassword"])(e.studentId).then((function(e){t.$modal.msgSuccess("密码重置成功")}))})).catch((function(){}))},getList:function(){var e=this;this.loading=!0,Object(o["e"])(this.queryParams).then((function(t){e.studentList=t.rows,e.total=t.total,e.loading=!1}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={studentId:null,studentNo:null,studentName:null,studentPassword:null,studentSex:"男",className:null,createBy:null,createTime:null,updateBy:null,updateTime:null,delFlag:"0"},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.studentId})),this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.open=!0,this.title="添加学生信息"},handleUpdate:function(e){var t=this;this.reset();var a=e.studentId||this.ids;Object(o["c"])(a).then((function(e){t.form=e.data,t.open=!0,t.title="修改学生信息"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(e.submitLoading=!0,null!=e.form.studentId?Object(o["g"])(e.form).then((function(t){e.$modal.msgSuccess("修改成功"),e.open=!1,e.getList(),e.submitLoading=!1})).catch((function(){e.submitLoading=!1})):Object(o["a"])(e.form).then((function(t){e.$modal.msgSuccess("新增成功"),e.open=!1,e.getList(),e.submitLoading=!1})).catch((function(){e.submitLoading=!1})))}))},handleDelete:function(e){var t=this,a=e.studentId||this.ids;this.$modal.confirm('是否确认删除学生信息编号为"'+a+'"的数据项？').then((function(){return Object(o["b"])(a)})).then((function(){t.getList(),t.$modal.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){this.download("system/student/export",Object(l["a"])({},this.queryParams),"student_".concat((new Date).getTime(),".xlsx"))}}},u=r,d=(a("05ef"),a("2877")),c=Object(d["a"])(u,s,n,!1,null,"528560d8",null);t["default"]=c.exports}}]);