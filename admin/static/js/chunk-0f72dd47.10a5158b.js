(this["webpackJsonpmyLibrary"]=this["webpackJsonpmyLibrary"]||[]).push([["chunk-0f72dd47"],{"00f9":function(e,t,r){"use strict";r("72dc")},"72dc":function(e,t,r){},af84:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return c})),r.d(t,"e",(function(){return u})),r.d(t,"c",(function(){return d})),r.d(t,"f",(function(){return h})),r.d(t,"d",(function(){return m}));var s=r("c14f"),a=r("b85c"),n=r("1da1");r("d9e2"),r("99af"),r("e9c4"),r("b64b"),r("d3b7"),r("2ca0"),r("498a");function o(e,t){return i.apply(this,arguments)}function i(){return i=Object(n["a"])(Object(s["a"])().m((function e(t,r){var n,o,i,c,l,u,p,d,f,h,g,m,b,v,w,k,y,P,_,j,x,O,T,S,z=arguments;return Object(s["a"])().w((function(e){while(1)switch(e.n){case 0:return n=r.onMessage,o=r.onDone,i=r.onError,c=z.length>2&&void 0!==z[2]?z[2]:"app-J4y46SO9GtwtjADyLAOj9tzL",l="http://101.43.162.190:8088/v1/chat-messages",u={inputs:{},query:t,response_mode:"streaming",user:"user"},p={Authorization:"Bearer ".concat(c),"Content-Type":"application/json"},e.p=1,e.n=2,fetch(l,{method:"POST",headers:p,body:JSON.stringify(u)});case 2:if(d=e.v,d.ok){e.n=3;break}throw new Error("HTTP error! status: ".concat(d.status));case 3:f=d.body.getReader(),h=new TextDecoder("utf-8"),g="";case 4:return e.n=5,f.read();case 5:if(m=e.v,b=m.done,v=m.value,!b){e.n=6;break}return console.log("Stream finished."),o&&o(),e.a(3,17);case 6:w=g+h.decode(v,{stream:!0}),k=w.split("\n"),g=k.pop()||"",y=Object(a["a"])(k),e.p=7,y.s();case 8:if((P=y.n()).done){e.n=13;break}if(_=P.value,_.startsWith("data:")){e.n=9;break}return e.a(3,12);case 9:if(e.p=9,j=_.substring(6),"[DONE]"!==j.trim()){e.n=10;break}return e.a(3,12);case 10:x=JSON.parse(j),"message"===x.event&&x.answer&&n&&n(x.answer),e.n=12;break;case 11:e.p=11,O=e.v,console.error("Failed to parse JSON from line:",_,O);case 12:e.n=8;break;case 13:e.n=15;break;case 14:e.p=14,T=e.v,y.e(T);case 15:return e.p=15,y.f(),e.f(15);case 16:e.n=4;break;case 17:e.n=19;break;case 18:e.p=18,S=e.v,console.error("Streaming failed:",S),i&&i(S);case 19:return e.a(2)}}),e,null,[[9,11],[7,14,15,16],[1,18]])}))),i.apply(this,arguments)}function c(e){return l.apply(this,arguments)}function l(){return l=Object(n["a"])(Object(s["a"])().m((function e(t){var r,a,n,o,i,c,l;return Object(s["a"])().w((function(e){while(1)switch(e.n){case 0:return r="http://101.43.162.190:8088/v1/workflows/run",a="app-n1JVzEVSjlnzr7PXVdzMYtdy",n={inputs:{chapter:t},response_mode:"blocking",user:"lesson-user"},o={Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},e.p=1,e.n=2,fetch(r,{method:"POST",headers:o,body:JSON.stringify(n)});case 2:if(i=e.v,i.ok){e.n=3;break}throw new Error("HTTP error! status: ".concat(i.status));case 3:return e.n=4,i.json();case 4:return c=e.v,e.a(2,c);case 5:throw e.p=5,l=e.v,l;case 6:return e.a(2)}}),e,null,[[1,5]])}))),l.apply(this,arguments)}function u(e){return p.apply(this,arguments)}function p(){return p=Object(n["a"])(Object(s["a"])().m((function e(t){var r,a,n,o,i,c,l,u=arguments;return Object(s["a"])().w((function(e){while(1)switch(e.n){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"app-bS8Qyzd7klGSkVvhbc2rlBs3",a="http://101.43.162.190:8088/v1/files/upload",n={Authorization:"Bearer ".concat(r)},o=new FormData,o.append("file",t),o.append("user","abc-123"),e.p=1,e.n=2,fetch(a,{method:"POST",headers:n,body:o});case 2:if(i=e.v,i.ok){e.n=3;break}throw new Error("HTTP error! status: ".concat(i.status));case 3:return e.n=4,i.json();case 4:return c=e.v,e.a(2,c.id);case 5:throw e.p=5,l=e.v,console.error("File upload failed:",l),l;case 6:return e.a(2)}}),e,null,[[1,5]])}))),p.apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return f=Object(n["a"])(Object(s["a"])().m((function e(t){var r,a,n,o,i,c,l,u,p,d=arguments;return Object(s["a"])().w((function(e){while(1)switch(e.n){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"circuit",a=d.length>2&&void 0!==d[2]?d[2]:"app-bS8Qyzd7klGSkVvhbc2rlBs3",n="http://101.43.162.190:8088/v1/workflows/run",o={inputs:{courseName:r,examFile:{type:"document",transfer_method:"local_file",upload_file_id:t}},response_mode:"blocking",user:"abc-124"},i={Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},e.p=1,e.n=2,fetch(n,{method:"POST",headers:i,body:JSON.stringify(o)});case 2:if(c=e.v,c.ok){e.n=3;break}throw new Error("HTTP error! status: ".concat(c.status));case 3:return e.n=4,c.json();case 4:return l=e.v,u="",l.data&&l.data.workflow_run_id&&l.data.workflow_run_id.outputs?u=l.data.workflow_run_id.outputs.text||"":l.data&&l.data.outputs?u=l.data.outputs.text||"":l.outputs&&(u=l.outputs.text||""),e.a(2,{success:!0,text:u,rawData:l});case 5:throw e.p=5,p=e.v,console.error("Exam analysis failed:",p),p;case 6:return e.a(2)}}),e,null,[[1,5]])}))),f.apply(this,arguments)}function h(e){return g.apply(this,arguments)}function g(){return g=Object(n["a"])(Object(s["a"])().m((function e(t){var r,a,n,o,i,c,l,u,p,d=arguments;return Object(s["a"])().w((function(e){while(1)switch(e.n){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"app-PMBbbHxJePSgvz2XPPytjEre",a="http://43.140.245.165:8993/v1/files/upload",n=new FormData,n.append("file",t),n.append("user","zxr"),e.p=1,e.n=2,fetch(a,{method:"POST",headers:{Authorization:"Bearer ".concat(r)},body:n});case 2:if(c=e.v,c.ok){e.n=3;break}throw new Error("HTTP error! status: ".concat(c.status));case 3:return e.n=4,c.json();case 4:if(l=e.v,console.log("Upload response:",l),u=l.id||l.file_id||(null===(o=l.data)||void 0===o?void 0:o.id)||(null===(i=l.data)||void 0===i?void 0:i.file_id)||"",u){e.n=5;break}throw console.error("Upload response data:",l),new Error("上传失败：未返回文件ID");case 5:return e.a(2,u);case 6:throw e.p=6,p=e.v,console.error("Resume file upload failed:",p),p;case 7:return e.a(2)}}),e,null,[[1,6]])}))),g.apply(this,arguments)}function m(e,t){return b.apply(this,arguments)}function b(){return b=Object(n["a"])(Object(s["a"])().m((function e(t,r){var a,n,o,i,c,l,u,p,d,f=arguments;return Object(s["a"])().w((function(e){while(1)switch(e.n){case 0:return a=f.length>2&&void 0!==f[2]?f[2]:"app-PMBbbHxJePSgvz2XPPytjEre",n="http://43.140.245.165:8993/v1/workflows/run",o={inputs:{resume_file:{transfer_method:"local_file",upload_file_id:t,type:"document"},job_description:r},response_mode:"blocking",user:"zxr"},i={Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},e.p=1,console.log("Optimize request payload:",JSON.stringify(o,null,2)),console.log("File ID:",t),e.n=2,fetch(n,{method:"POST",headers:i,body:JSON.stringify(o)});case 2:if(c=e.v,c.ok){e.n=4;break}return e.n=3,c.text();case 3:throw l=e.v,console.error("Optimize error response:",l),new Error("HTTP error! status: ".concat(c.status,", message: ").concat(l));case 4:return e.n=5,c.json();case 5:return u=e.v,p="",u.data&&u.data.workflow_run_id&&u.data.workflow_run_id.outputs?p=u.data.workflow_run_id.outputs.text||u.data.workflow_run_id.outputs.result||"":u.data&&u.data.outputs?p=u.data.outputs.text||u.data.outputs.result||"":u.outputs?p=u.outputs.text||u.outputs.result||"":u.result&&(p=u.result),e.a(2,{success:!0,text:p,rawData:u});case 6:throw e.p=6,d=e.v,console.error("Resume optimization failed:",d),d;case 7:return e.a(2)}}),e,null,[[1,6]])}))),b.apply(this,arguments)}},c383:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-wrap"},[r("div",{staticClass:"page-hero",style:e.bgStyle("resume-opt")},[r("h2",[e._v("简历优化")]),r("p",[e._v("上传您的简历，输入目标职位描述，获取AI智能优化建议")])]),r("div",{staticClass:"page-body"},[r("el-steps",{staticStyle:{"margin-bottom":"30px"},attrs:{active:e.step,"finish-status":"success","align-center":""}},[r("el-step",{attrs:{title:"上传简历"}}),r("el-step",{attrs:{title:"输入职位描述"}}),r("el-step",{attrs:{title:"获取优化建议"}})],1),0===e.step?r("div",{staticClass:"step-content"},[r("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"","auto-upload":!1,"on-change":e.handleFileChange,"file-list":e.fileList,limit:1,accept:".pdf,.doc,.docx,.txt"}},[r("i",{staticClass:"el-icon-upload"}),r("div",{staticClass:"el-upload__text"},[e._v("将简历文件拖到此处，或"),r("em",[e._v("点击上传")])]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("支持 PDF、Word、TXT 格式，文件大小不超过 10MB")])]),r("div",{staticClass:"step-actions"},[r("el-button",{attrs:{type:"primary",loading:e.uploading,disabled:!e.selectedFile},on:{click:e.handleUpload}},[e._v(" 上传文件 ")])],1)],1):e._e(),1===e.step?r("div",{staticClass:"step-content"},[r("el-form",{staticClass:"job-form",attrs:{model:e.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"职位描述"}},[r("el-input",{attrs:{type:"textarea",rows:8,placeholder:"请输入您要应聘的职位描述，包括岗位职责、任职要求等（最多1024个字符）...",maxlength:"1024","show-word-limit":""},model:{value:e.form.jobDescription,callback:function(t){e.$set(e.form,"jobDescription",t)},expression:"form.jobDescription"}})],1)],1),e.optimizing?r("div",{staticClass:"optimize-progress"},[r("el-progress",{attrs:{percentage:e.progressPercentage,status:e.progressStatus,"stroke-width":8,"show-text":!0}},[r("template",{slot:"format"},[r("span",{staticClass:"progress-text"},[e._v(e._s(e.progressText))])])],2),r("p",{staticClass:"progress-tip"},[e._v(e._s(e.progressTip))])],1):e._e(),r("div",{staticClass:"step-actions"},[r("el-button",{attrs:{disabled:e.optimizing},on:{click:function(t){e.step=0}}},[e._v("上一步")]),r("el-button",{attrs:{type:"primary",loading:e.optimizing,disabled:!e.form.jobDescription.trim()||e.optimizing},on:{click:e.handleOptimize}},[e._v(" 开始优化 ")])],1)],1):e._e(),2===e.step?r("div",{staticClass:"step-content"},[r("div",{staticClass:"result-header"},[r("h3",[e._v("优化建议")]),r("el-button",{attrs:{type:"text"},on:{click:e.handleReset}},[e._v("重新优化")])],1),e.result?r("div",{staticClass:"result-content"},[r("div",{staticClass:"result-text",domProps:{innerHTML:e._s(e.formatResult(e.result))}})]):r("div",{staticClass:"result-empty"},[r("el-empty",{attrs:{description:"暂无优化建议"}})],1)]):e._e(),e.error?r("el-alert",{staticStyle:{"margin-top":"20px"},attrs:{title:e.error,type:"error",closable:!0},on:{close:function(t){e.error=""}}}):e._e()],1)])},a=[],n=r("c14f"),o=r("1da1"),i=(r("d9e2"),r("7db0"),r("d3b7"),r("498a"),r("af84")),c=r("7c5c"),l={name:"EasyResumeOpt",data:function(){return{step:0,fileList:[],selectedFile:null,uploading:!1,optimizing:!1,fileId:"",form:{jobDescription:""},result:"",error:"",progressPercentage:0,progressStatus:null,progressText:"正在分析简历...",progressTip:"AI 正在分析您的简历和职位描述，请稍候...",progressTimer:null}},methods:{bgStyle:function(e){var t={"resume-opt":"/img/easy-square/resume-opt.png"};return{backgroundImage:"linear-gradient(135deg, rgba(0,0,0,.35), rgba(0,0,0,.45)), url('".concat(t[e],"')"),backgroundSize:"cover",backgroundPosition:"center"}},handleFileChange:function(e,t){this.selectedFile=e.raw,this.fileList=t,this.error=""},handleUpload:function(){var e=this;return Object(o["a"])(Object(n["a"])().m((function t(){var r,s;return Object(n["a"])().w((function(t){while(1)switch(t.n){case 0:if(e.selectedFile){t.n=1;break}return e.$message.warning("请先选择文件"),t.a(2);case 1:if(!(e.selectedFile.size>10485760)){t.n=2;break}return e.$message.error("文件大小不能超过 10MB"),t.a(2);case 2:return e.uploading=!0,e.error="",t.p=3,t.n=4,Object(i["f"])(e.selectedFile);case 4:if(r=t.v,!r){t.n=5;break}e.fileId=r,e.$message.success("文件上传成功"),e.step=1,t.n=6;break;case 5:throw new Error("上传失败，未返回文件ID");case 6:t.n=8;break;case 7:t.p=7,s=t.v,e.error="文件上传失败："+(s.message||"未知错误"),e.$message.error(e.error);case 8:return t.p=8,e.uploading=!1,t.f(8);case 9:return t.a(2)}}),t,null,[[3,7,8,9]])})))()},handleOptimize:function(){var e=this;return Object(o["a"])(Object(n["a"])().m((function t(){var r,s;return Object(n["a"])().w((function(t){while(1)switch(t.n){case 0:if(e.form.jobDescription.trim()){t.n=1;break}return e.$message.warning("请输入职位描述"),t.a(2);case 1:if(!(e.form.jobDescription.length>1024)){t.n=2;break}return e.$message.error("职位描述不能超过 1024 个字符，当前为 "+e.form.jobDescription.length+" 个字符"),t.a(2);case 2:if(e.fileId){t.n=3;break}return e.$message.error("请先上传简历文件"),e.step=0,t.a(2);case 3:return e.optimizing=!0,e.error="",e.progressPercentage=0,e.progressStatus=null,e.progressText="正在分析简历...",e.progressTip="AI 正在分析您的简历和职位描述，请稍候...",e.startProgress(),t.p=4,t.n=5,Object(i["d"])(e.fileId,e.form.jobDescription);case 5:if(r=t.v,!r.success||!r.text){t.n=6;break}e.progressPercentage=100,e.progressStatus="success",e.progressText="优化完成",e.progressTip="简历优化建议已生成",setTimeout((function(){e.result=r.text,e.step=2,e.$message.success("优化完成"),e.stopProgress()}),500),t.n=7;break;case 6:throw new Error("优化失败，未返回结果");case 7:t.n=9;break;case 8:t.p=8,s=t.v,e.stopProgress(),e.progressStatus="exception",e.progressText="优化失败",e.progressTip="请检查网络连接或稍后重试",e.error="优化失败："+(s.message||"未知错误"),e.$message.error(e.error),e.optimizing=!1;case 9:return t.a(2)}}),t,null,[[4,8]])})))()},startProgress:function(){var e=this;this.progressTimer&&clearInterval(this.progressTimer),this.progressPercentage=10;var t=Date.now(),r=6e4,s=98,a=[{minPercent:10,maxPercent:25,text:"正在解析简历内容...",tip:"AI 正在读取和分析您的简历信息"},{minPercent:25,maxPercent:45,text:"正在匹配职位要求...",tip:"AI 正在对比简历与职位描述的匹配度"},{minPercent:45,maxPercent:65,text:"正在生成优化建议...",tip:"AI 正在为您生成个性化的优化建议"},{minPercent:65,maxPercent:85,text:"正在完善优化方案...",tip:"AI 正在完善优化方案的细节"},{minPercent:85,maxPercent:95,text:"即将完成...",tip:"优化建议即将生成完成"},{minPercent:95,maxPercent:98,text:"最后检查...",tip:"正在做最后的检查和优化"}];this.progressTimer=setInterval((function(){var n=Date.now()-t,o=Math.min(n/r,.98);e.progressPercentage=Math.floor(10+(s-10)*o);var i=a.find((function(t){return e.progressPercentage>=t.minPercent&&e.progressPercentage<t.maxPercent}))||a[a.length-1];e.progressText=i.text,e.progressTip=i.tip,e.progressPercentage>=98&&(e.progressPercentage=98,e.progressText="即将完成...",e.progressTip="优化建议即将生成完成，请稍候...")}),1500)},stopProgress:function(){this.progressTimer&&(clearInterval(this.progressTimer),this.progressTimer=null)},formatResult:function(e){return e?c["marked"].parse(e,{gfm:!0,breaks:!0}):""},handleReset:function(){this.stopProgress(),this.step=0,this.fileList=[],this.selectedFile=null,this.fileId="",this.form.jobDescription="",this.result="",this.error="",this.progressPercentage=0,this.progressStatus=null}},beforeDestroy:function(){this.stopProgress()}},u=l,p=(r("00f9"),r("2877")),d=Object(p["a"])(u,s,a,!1,null,"2c22efb3",null);t["default"]=d.exports}}]);