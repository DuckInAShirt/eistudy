(this["webpackJsonpmyLibrary"]=this["webpackJsonpmyLibrary"]||[]).push([["chunk-64c5e7e0"],{"04d1":function(t,n,e){"use strict";var s=e("342f"),i=s.match(/firefox\/(\d+)/i);t.exports=!!i&&+i[1]},"055b":function(t,n,e){"use strict";e.d(n,"d",(function(){return i})),e.d(n,"c",(function(){return a})),e.d(n,"a",(function(){return r})),e.d(n,"e",(function(){return o})),e.d(n,"b",(function(){return c}));var s=e("b775");function i(t){return Object(s["a"])({url:"/system/question/list",method:"get",params:t})}function a(t){return Object(s["a"])({url:"/system/question/"+t,method:"get"})}function r(t){return Object(s["a"])({url:"/system/question",method:"post",data:t})}function o(t){return Object(s["a"])({url:"/system/question",method:"put",data:t})}function c(t){return Object(s["a"])({url:"/system/question/"+t,method:"delete"})}},"09d9":function(t,n,e){},"2a0f":function(t,n,e){"use strict";e.r(n);var s=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"app-container"},[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("试卷详情")])]),e("el-descriptions",{attrs:{column:3,border:""}},[e("el-descriptions-item",{attrs:{label:"试卷标题"}},[t._v(t._s(t.paperInfo.title))]),e("el-descriptions-item",{attrs:{label:"总分"}},[t._v(t._s(t.paperInfo.totalScore))]),e("el-descriptions-item",{attrs:{label:"考试时长"}},[t._v(t._s(t.paperInfo.duration)+" 分钟")]),e("el-descriptions-item",{attrs:{label:"开始时间"}},[t._v(t._s(t.parseTime(t.paperInfo.startTime)))]),e("el-descriptions-item",{attrs:{label:"截止时间"}},[t._v(t._s(t.parseTime(t.paperInfo.endTime)))]),e("el-descriptions-item",{attrs:{label:"状态"}},[t._v(t._s(t.statusText[t.paperInfo.status]||"未知"))])],1)],1),e("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"box-card question-list"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("题目列表")]),e("el-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"success"},on:{click:t.printPaper}},[t._v("打印试卷")])],1),t._l(t.questionList,(function(n,s){return e("div",{key:n.id,staticClass:"question-item"},[e("div",{staticClass:"question-header"},[e("span",{staticClass:"question-number"},[t._v(t._s(n.questionNumber)+". ")]),e("span",{staticClass:"question-type"},[t._v("["+t._s(t.questionTypes[n.questionType]||n.questionType)+"]")]),e("span",{staticClass:"question-score"},[t._v("("+t._s(n.score)+"分)")]),n.knowledgePoint?e("span",{staticClass:"knowledge-point"},[t._v("知识点: "+t._s(n.knowledgePoint))]):t._e()]),e("div",{staticClass:"question-content",domProps:{innerHTML:t._s(n.questionContent)}}),["single","multiple"].includes(n.questionType)?e("div",{staticClass:"question-options"},t._l(t.parseOptions(n.options),(function(n,s){return e("div",{key:s,staticClass:"option-item"},[e("span",{staticClass:"option-label"},[t._v(t._s(s)+". ")]),t.isHtmlTag(n)?e("code",{staticClass:"html-tag"},[t._v(t._s(n))]):e("span",[t._v(t._s(n))])])})),0):t._e(),e("div",{staticClass:"answer-section"},[e("el-button",{attrs:{type:"text"},on:{click:function(n){return t.toggleAnswer(s)}}},[t._v(" "+t._s(t.showAnswers[s]?"隐藏答案":"查看答案")+" ")]),t.showAnswers[s]?e("div",{staticClass:"answer-content"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("参考答案")]),"fill"===n.questionType?t._l(t.getAnswersForQuestion(n.id),(function(n){return e("div",{key:n.id,staticClass:"blank-answer"},[e("span",[t._v("空格"+t._s(n.blankNumber)+"("+t._s(n.blankScore)+"分): ")]),t.isHtmlTag(n.answerContent)?e("code",{staticClass:"html-tag"},[t._v(t._s(n.answerContent))]):e("span",[t._v(t._s(n.answerContent))])])})):[t.getAnswersForQuestion(n.id).length>0?e("div",[t.isHtmlTag(t.getAnswersForQuestion(n.id)[0].answerContent)?e("code",{staticClass:"html-tag"},[t._v(" "+t._s(t.getAnswersForQuestion(n.id)[0].answerContent)+" ")]):e("span",[t._v(t._s(t.getAnswersForQuestion(n.id)[0].answerContent))])]):e("div",{staticClass:"no-answer"},[t._v("暂无参考答案")])],n.analysis?[e("el-divider",{attrs:{"content-position":"left"}},[t._v("解析")]),t.containsHtmlTags(n.analysis)?e("div",{staticClass:"analysis-content"},[t._v(" "+t._s(t.formatAnalysisWithTags(n.analysis))+" ")]):e("div",[t._v(t._s(n.analysis))])]:t._e(),n.scoringCriteria&&["essay","coding"].includes(n.questionType)?[e("el-divider",{attrs:{"content-position":"left"}},[t._v("评分标准")]),e("div",[t._v(t._s(n.scoringCriteria))])]:t._e()],2):t._e()],1)])})),0===t.questionList.length?e("el-empty",{attrs:{description:"暂无题目"}}):t._e()],2)],1)},i=[],a=(e("a4d3"),e("e01a"),e("99af"),e("4de4"),e("caad"),e("4e82"),e("b64b"),e("d3b7"),e("ac1f"),e("00b4"),e("3ca3"),e("5319"),e("0643"),e("2382"),e("4e3e"),e("159b"),e("ddb0"),e("5665")),r=e("055b"),o=e("ed28"),c={name:"PaperDetail",data:function(){return{paperId:null,paperInfo:{},questionList:[],answerList:[],showAnswers:{},loading:!0,questionTypes:{single:"单选题",multiple:"多选题",fill:"填空题",essay:"简答题",coding:"编程题"},statusText:{0:"未开始",1:"进行中",2:"已结束"}}},created:function(){this.paperId=this.$route.params.id,this.loadData()},methods:{loadData:function(){var t=this;this.loading=!0,Promise.all([this.getPaperInfo(),this.getQuestionList(),this.getAnswerList()]).finally((function(){t.loading=!1}))},getPaperInfo:function(){var t=this;return Object(a["c"])(this.paperId).then((function(n){t.paperInfo=n.data||{}}))},getQuestionList:function(){var t=this;return Object(r["d"])({paperId:this.paperId,pageSize:100}).then((function(n){t.questionList=(n.rows||[]).sort((function(t,n){return t.questionNumber-n.questionNumber})),t.questionList.forEach((function(n,e){t.$set(t.showAnswers,e,!1)}))}))},getAnswerList:function(){var t=this;return Object(o["d"])({pageSize:1e3}).then((function(n){t.answerList=n.rows||[]}))},toggleAnswer:function(t){this.$set(this.showAnswers,t,!this.showAnswers[t])},getAnswersForQuestion:function(t){return this.answerList.filter((function(n){return n.questionId===t}))},parseOptions:function(t){try{return JSON.parse(t||"{}")}catch(n){return console.error("解析选项失败",n),{}}},isHtmlTag:function(t){return!!t&&/^<[a-zA-Z][a-zA-Z0-9]*>$/.test(t)},containsHtmlTags:function(t){return!!t&&/<[a-zA-Z][a-zA-Z0-9]*>/.test(t)},formatAnalysisWithTags:function(t){return t?t.replace(/<([a-zA-Z][a-zA-Z0-9]*)>/g,(function(t,n){return"<".concat(n,">")})):""},printPaper:function(){var t=this;this.$modal.confirm("是否包含答案和解析？").then((function(){t.doPrint(!0)})).catch((function(){t.doPrint(!1)}))},doPrint:function(t){var n=this,e=window.open("","_blank"),s="\n        <html>\n        <head>\n          <title>".concat(this.paperInfo.title||"试卷详情",'</title>\n          <style>\n            body { font-family: SimSun, serif; padding: 20px; }\n            .paper-header { text-align: center; margin-bottom: 20px; }\n            .paper-title { font-size: 22px; font-weight: bold; }\n            .paper-info { margin-top: 10px; font-size: 14px; }\n            .question-item { margin-bottom: 20px; }\n            .question-header { font-weight: bold; }\n            .option-item { margin: 5px 0; padding-left: 20px; }\n            .html-tag { font-family: monospace; background-color: #f0f0f0; padding: 2px 4px; border-radius: 3px; }\n            .answer { color: #67C23A; margin-top: 10px; }\n            @media print {\n              .no-print { display: none; }\n              body { font-size: 12pt; }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="paper-header">\n            <div class="paper-title">').concat(this.paperInfo.title||"试卷",'</div>\n            <div class="paper-info">\n              总分: ').concat(this.paperInfo.totalScore||0,"分 |\n              考试时长: ").concat(this.paperInfo.duration||0,'分钟\n            </div>\n            <div class="paper-info">\n              ').concat(this.paperInfo.description||"",'\n            </div>\n          </div>\n          <div class="no-print">\n            <button onclick="window.print()">打印</button>\n            <button onclick="window.close()">关闭</button>\n          </div>\n      ');this.questionList.forEach((function(e){if(s+='\n          <div class="question-item">\n            <div class="question-header">\n              '.concat(e.questionNumber,". [").concat(n.questionTypes[e.questionType]||e.questionType,"] (").concat(e.score,"分)\n            </div>\n            <div>").concat(e.questionContent||"","</div>\n        "),["single","multiple"].includes(e.questionType)){var i=n.parseOptions(e.options);for(var a in i){var r=n.isHtmlTag(i[a])?'<span class="html-tag">'.concat(i[a],"</span>"):i[a];s+='<div class="option-item">'.concat(a,". ").concat(r,"</div>")}}if(t){var o=n.getAnswersForQuestion(e.id);if(o.length>0){if(s+='<div class="answer"><strong>参考答案:</strong>',"fill"===e.questionType)o.forEach((function(t){var e=n.isHtmlTag(t.answerContent)?'<span class="html-tag">'.concat(t.answerContent,"</span>"):t.answerContent;s+="<div>空格".concat(t.blankNumber,": ").concat(e,"</div>")}));else{var c=n.isHtmlTag(o[0].answerContent)?'<span class="html-tag">'.concat(o[0].answerContent,"</span>"):o[0].answerContent;s+="<div>".concat(c,"</div>")}s+="</div>",e.analysis&&(s+='<div class="answer"><strong>解析:</strong> '.concat(e.analysis,"</div>"))}}s+="</div>"})),s+="\n        </body>\n        </html>\n      ",e.document.open(),e.document.write(s),e.document.close()}}},u=c,l=(e("c76f"),e("2877")),d=Object(l["a"])(u,s,i,!1,null,"4614f8b3",null);n["default"]=d.exports},"4e82":function(t,n,e){"use strict";var s=e("23e7"),i=e("e330"),a=e("59ed"),r=e("7b0b"),o=e("07fa"),c=e("083a"),u=e("577e"),l=e("d039"),d=e("addb"),p=e("a640"),f=e("04d1"),v=e("d998"),m=e("2d00"),h=e("512ce"),g=[],b=i(g.sort),w=i(g.push),_=l((function(){g.sort(void 0)})),y=l((function(){g.sort(null)})),C=p("sort"),q=!l((function(){if(m)return m<70;if(!(f&&f>3)){if(v)return!0;if(h)return h<603;var t,n,e,s,i="";for(t=65;t<76;t++){switch(n=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:e=3;break;case 68:case 71:e=4;break;default:e=2}for(s=0;s<47;s++)g.push({k:n+s,v:e})}for(g.sort((function(t,n){return n.v-t.v})),s=0;s<g.length;s++)n=g[s].k.charAt(0),i.charAt(i.length-1)!==n&&(i+=n);return"DGBEFHACIJK"!==i}})),A=_||!y||!C||!q,T=function(t){return function(n,e){return void 0===e?-1:void 0===n?1:void 0!==t?+t(n,e)||0:u(n)>u(e)?1:-1}};s({target:"Array",proto:!0,forced:A},{sort:function(t){void 0!==t&&a(t);var n=r(this);if(q)return void 0===t?b(n):b(n,t);var e,s,i=[],u=o(n);for(s=0;s<u;s++)s in n&&w(i,n[s]);d(i,T(t)),e=o(i),s=0;while(s<e)n[s]=i[s++];while(s<u)c(n,s++);return n}})},"512ce":function(t,n,e){"use strict";var s=e("342f"),i=s.match(/AppleWebKit\/(\d+)\./);t.exports=!!i&&+i[1]},5665:function(t,n,e){"use strict";e.d(n,"d",(function(){return i})),e.d(n,"c",(function(){return a})),e.d(n,"a",(function(){return r})),e.d(n,"e",(function(){return o})),e.d(n,"b",(function(){return c}));var s=e("b775");function i(t){return Object(s["a"])({url:"/system/paper/list",method:"get",params:t})}function a(t){return Object(s["a"])({url:"/system/paper/"+t,method:"get"})}function r(t){return Object(s["a"])({url:"/system/paper",method:"post",data:t})}function o(t){return Object(s["a"])({url:"/system/paper",method:"put",data:t})}function c(t){return Object(s["a"])({url:"/system/paper/"+t,method:"delete"})}},addb:function(t,n,e){"use strict";var s=e("f36a"),i=Math.floor,a=function(t,n){var e=t.length;if(e<8){var r,o,c=1;while(c<e){o=c,r=t[c];while(o&&n(t[o-1],r)>0)t[o]=t[--o];o!==c++&&(t[o]=r)}}else{var u=i(e/2),l=a(s(t,0,u),n),d=a(s(t,u),n),p=l.length,f=d.length,v=0,m=0;while(v<p||m<f)t[v+m]=v<p&&m<f?n(l[v],d[m])<=0?l[v++]:d[m++]:v<p?l[v++]:d[m++]}return t};t.exports=a},c76f:function(t,n,e){"use strict";e("09d9")},d998:function(t,n,e){"use strict";var s=e("342f");t.exports=/MSIE|Trident/.test(s)},ed28:function(t,n,e){"use strict";e.d(n,"d",(function(){return i})),e.d(n,"c",(function(){return a})),e.d(n,"a",(function(){return r})),e.d(n,"e",(function(){return o})),e.d(n,"b",(function(){return c}));var s=e("b775");function i(t){return Object(s["a"])({url:"/system/answer/list",method:"get",params:t})}function a(t){return Object(s["a"])({url:"/system/answer/"+t,method:"get"})}function r(t){return Object(s["a"])({url:"/system/answer",method:"post",data:t})}function o(t){return Object(s["a"])({url:"/system/answer",method:"put",data:t})}function c(t){return Object(s["a"])({url:"/system/answer/"+t,method:"delete"})}}}]);